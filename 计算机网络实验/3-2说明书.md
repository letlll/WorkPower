### 第三章 实验（二）常用网络命令与Cisco Packet Tracer环境熟悉

#### 3.1 常用网络命令的使用

##### 3.1.4 实验步骤详解

以下是针对常用网络命令的操作步骤和说明，确保你能够在Windows环境下正确执行这些命令，并理解其功能。

---

##### 3.1.4.1 **IPCONFIG 命令**

**目的：** 显示和管理计算机的TCP/IP配置信息。

**操作步骤：**

1. **打开命令提示符：**
   - 按下 `Win + R`，输入 `cmd`，然后按 `Enter`。

2. **查看基本IP配置信息：**
   - 输入 `ipconfig`，然后按 `Enter`。
   - 你将看到类似如下的信息：
     ```
     Windows IP Configuration

     Ethernet adapter 本地连接:

        Connection-specific DNS Suffix  . :
        IP Address. . . . . . . . . . . : 192.168.1.2
        Subnet Mask . . . . . . . . . . . : 255.255.255.0
        Default Gateway . . . . . . . . . : 192.168.1.1
     ```

3. **查看所有详细信息：**
   - 输入 `ipconfig /all`，然后按 `Enter`。
   - 这将显示包括物理地址（MAC地址）、DHCP状态、DNS服务器等详细信息。

4. **释放和更新DHCP分配的IP地址：**
   - 释放IP地址：输入 `ipconfig /release`，然后按 `Enter`。
   - 更新IP地址：输入 `ipconfig /renew`，然后按 `Enter`。

**实验操作：**

- 在命令提示符中输入 `ipconfig /all`，观察并记录输出信息，确保IP地址、子网掩码和默认网关正确配置。

---

##### 3.1.4.2 **PING 命令**

**目的：** 测试网络连接性，诊断网络问题。

**操作步骤：**

1. **打开命令提示符：**
   - 按下 `Win + R`，输入 `cmd`，然后按 `Enter`。

2. **测试本地回环接口：**
   - 输入 `ping 127.0.0.1`，然后按 `Enter`。
   - 正常情况下，会收到来自127.0.0.1的回复。

3. **测试本机IP地址：**
   - 输入 `ping [你的IP地址]`，例如 `ping 192.168.1.2`，然后按 `Enter`。
   - 确认本机网络配置是否正常。

4. **测试局域网内其他设备：**
   - 输入 `ping 192.168.1.1`（假设这是网关IP），然后按 `Enter`。
   - 检查与网关的连通性。

5. **测试远程主机：**
   - 输入 `ping www.baidu.com`，然后按 `Enter`。
   - 检查互联网连接性。

**实验操作：**

- 在命令提示符中依次输入以下命令并观察结果：
  - `ping localhost`
  - `ping 127.0.0.1`
  - `ping 192.168.1.1`（替换为实际网关IP）
  - `ping 192.168.1.2`（替换为另一台PC的IP）
- 确认所有命令返回成功的回复，确保网络连接正常。

---

##### 3.1.4.3 **ROUTE 命令**

**目的：** 显示和修改路由表。

**操作步骤：**

1. **打开命令提示符：**
   - 按下 `Win + R`，输入 `cmd`，然后按 `Enter`。

2. **查看当前路由表：**
   - 输入 `route print`，然后按 `Enter`。
   - 记录当前的路由表信息。

3. **添加一条静态路由：**
   - 假设要添加到网络 `209.98.32.33`，子网掩码 `255.255.255.224`，通过网关 `202.96.123.5`，跳数（Metric）为 `5`。
   - 输入以下命令：
     ```
     route add 209.98.32.33 mask 255.255.255.224 202.96.123.5 metric 5
     ```
   - 按 `Enter`，确认无错误提示。

4. **修改现有路由：**
   - 将上面的路由的Metric改为 `3`，并通过新的网关 `202.96.123.250`。
   - 输入以下命令：
     ```
     route change 209.98.32.33 mask 255.255.255.224 202.96.123.250 metric 3
     ```
   - 按 `Enter`，确认无错误提示。

5. **删除路由：**
   - 输入以下命令删除刚添加的路由：
     ```
     route delete 209.98.32.33
     ```
   - 按 `Enter`，确认删除成功。

**实验操作：**

- 在命令提示符中输入 `route print`，观察当前路由表。
- 根据需要添加、修改或删除路由条目，确保命令执行正确。

---

##### 3.1.4.4 **NETSTAT 命令**

**目的：** 显示网络连接、路由表和协议统计信息。

**操作步骤：**

1. **打开命令提示符：**
   - 按下 `Win + R`，输入 `cmd`，然后按 `Enter`。

2. **查看所有连接：**
   - 输入 `netstat -a`，然后按 `Enter`。
   - 查看所有活动的TCP和UDP连接。

3. **查看以数字形式显示地址和端口：**
   - 输入 `netstat -n`，然后按 `Enter`。
   - 地址和端口以数字形式显示，便于快速识别。

4. **查看路由表：**
   - 输入 `netstat -r`，然后按 `Enter`。
   - 显示当前的路由表，与 `route print` 类似。

5. **查看特定协议的连接：**
   - 例如查看TCP连接：输入 `netstat -p tcp`，然后按 `Enter`。

**实验操作：**

- 在命令提示符中依次输入以下命令并观察结果：
  - `netstat -a`
  - `netstat -n`
  - `netstat -r`
  - `netstat -p tcp`
- 分析不同命令输出的区别，理解网络连接状态。

---

##### 3.1.4.5 **ARP 命令**

**目的：** 显示和修改本地ARP缓存表。

**操作步骤：**

1. **打开命令提示符：**
   - 按下 `Win + R`，输入 `cmd`，然后按 `Enter`。

2. **查看所有ARP缓存项：**
   - 输入 `arp -a`，然后按 `Enter`。
   - 列出所有IP地址和对应的物理地址（MAC地址）。

3. **添加静态ARP条目：**
   - 假设要添加IP `192.168.1.10`，MAC地址 `00-1A-2B-3C-4D-5E`。
   - 输入以下命令：
     ```
     arp -s 192.168.1.10 00-1A-2B-3C-4D-5E
     ```
   - 按 `Enter`，确认添加成功。

4. **删除ARP条目：**
   - 输入以下命令删除IP `192.168.1.10`的ARP条目：
     ```
     arp -d 192.168.1.10
     ```
   - 按 `Enter`，确认删除成功。

**实验操作：**

- 在命令提示符中输入 `arp -a`，查看当前ARP缓存。
- 根据需要添加或删除ARP条目，确保命令执行正确。

---

#### 3.2 Cisco Packet Tracer 使用简介

##### 3.2.4 实验内容与步骤详解

**目的：** 使用Cisco Packet Tracer搭建一个简单的网络，配置设备IP信息，并测试连通性。

**操作步骤：**

1. **启动Cisco Packet Tracer：**
   - 双击桌面上的Cisco Packet Tracer图标，或通过开始菜单启动软件。

2. **了解主界面：**
   - **顶部工具栏：** 包含新建、打开、保存、复制、粘贴、撤销、重做等基本操作按钮。
   - **左侧设备面板：** 包含路由器、交换机、终端设备等分类。选择“交换机”类别。
   - **中间工作区：** 用于拖拽设备，构建网络拓扑。
   - **右侧设备操作区：** 包含设备编辑、移动、删除等工具。

3. **添加交换机：**
   - 在左侧设备面板中选择“交换机”。
   - 从设备列表中选择“2950-24”交换机，拖动到中间工作区。

4. **添加PC_1：**
   - 在左侧设备面板中选择“终端设备”。
   - 选择“PC”，拖动到工作区。
   - 点击PC图标，选择“桌面”标签，点击“IP配置”。
   - 设置IP地址为 `192.168.1.1`，子网掩码自动填充为 `255.255.255.0`，默认网关为 `192.168.1.254`（假设交换机的管理IP为此地址）。

5. **添加PC_2：**
   - 重复PC_1的步骤，添加第二台PC。
   - 设置IP地址为 `192.168.1.2`，子网掩码 `255.255.255.0`，默认网关 `192.168.1.254`。

6. **连接设备：**
   - 在左侧设备面板中选择“连接设备”图标（通常为闪电图标）。
   - 选择“直通线”（Copper Straight-Through）。
   - 点击PC_1的网络接口（通常为FastEthernet0），拖动到交换机的任意一个端口（如FastEthernet0/1）。
   - 重复同样的步骤，将PC_2连接到交换机的另一个端口（如FastEthernet0/2）。

7. **配置交换机（可选）：**
   - 点击交换机图标，选择“配置”标签，设置管理IP地址等参数（如需要）。

8. **测试连通性：**
   - 点击PC_1图标，选择“桌面”标签，点击“命令提示符”。
   - 在命令提示符中输入 `ping 192.168.1.2`，然后按 `Enter`。
   - 应该收到来自PC_2的回复，表示网络连通性良好。

**实验操作示例：**

- **添加交换机和PC：**
  ![添加设备](assets/Pasted%20image%2020241023091325.png)

- **配置PC IP地址：**
  ![配置IP](assets/屏幕截图%202024-10-23%20091256.png)

- **连接设备：**
  ![连接设备](assets/屏幕截图%202024-10-23%20091304.png)

- **执行Ping测试：**
  ```
  C:\> ping 192.168.1.2

  Pinging 192.168.1.2 with 32 bytes of data:
  Reply from 192.168.1.2: bytes=32 time<1ms TTL=128
  Reply from 192.168.1.2: bytes=32 time<1ms TTL=128
  Reply from 192.168.1.2: bytes=32 time<1ms TTL=128
  Reply from 192.168.1.2: bytes=32 time<1ms TTL=128

  Ping statistics for 192.168.1.2:
      Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
  ```

---

### 总结

通过以上步骤，你应该能够在Windows操作系统下熟练使用常用网络命令，如 `ipconfig`、`ping`、`route`、`netstat` 和 `arp`，并利用Cisco Packet Tracer搭建一个基本的网络环境，配置设备IP地址并测试网络连通性。这些技能对于网络管理与维护至关重要，建议多加练习以巩固理解。

如果在操作过程中遇到任何问题，建议参考相关软件的官方文档或寻求网络管理员的帮助。